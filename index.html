<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>WAUKLINK — Services</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="description"
        content="WAUKLINK – Trouvez des services, artisans, conciergeries et annonces près de chez vous.">

  <!-- STYLE GLOBAL -->
  <link rel="stylesheet" href="./style.css">
  <!-- CARROUSEL -->
  <link rel="stylesheet" href="./carousel.css">
</head>

<body>

<header class="topbar">
  <div class="container topbar-row">
    <div>
      <h1>WAUKLINK</h1>
      <div class="subtitle">Services · Travaux · Conciergerie · Airbnb</div>
    </div>

    <nav class="topbar-nav">
      <a class="link" href="./pricing.html">Tarifs</a>
      <a class="link" href="./legal/index.html">CGU</a>
      <a class="link" href="./auth/login.html">Connexion</a>
      <a class="btn btn-outline" href="./auth/register.html">Inscription</a>
    </nav>
  </div>
</header>

<main class="container main-layout">

  <section class="circle-section">
    <h2 class="section-title">Choisissez un service</h2>
    <p class="section-subtitle">
      Glissez avec la souris ou le doigt · Cliquez pour ouvrir
    </p>

    <div class="circle-wrapper">
      <div
        id="infinityCarousel"
        class="circle"
        aria-label="Sélecteur de services WAUKLINK">
      </div>
    </div>
  </section>

</main>

<footer class="site-footer">
  <div class="footer-container">

    <!-- GAUCHE -->
    <div class="footer-left">
      © WAUKLINK
    </div>

    <!-- CENTRE -->
    <nav class="footer-center">
      <a href="./pricing.html">Tarifs</a>
      <a href="./legal/index.html">CGU</a>
      <a href="./legal/privacy.html">Confidentialité</a>
      <a href="./legal/mentions-legales.html">Mentions légales</a>
    </nav>

    <!-- DROITE : ADMIN / MODÉRATION -->
    <div class="footer-right hidden" id="adminLinks">
      <a href="./admin/index.html">Admin</a>
      <span class="sep">·</span>
      <a href="./dashboard/moderation-location.html">Modération</a>
    </div>

  </div>
</footer>

<!-- CARROUSEL (APRÈS DOM) -->
<script src="./carousel.js"></script>

<!-- AUTH / ROLE (EXISTANT CHEZ TOI) -->
<script type="module">
  import { auth, db } from "./shared/firebase.js";
  import { onAuthStateChanged } from
    "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";
  import { doc, getDoc } from
    "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

  const adminLinks = document.getElementById("adminLinks");

  onAuthStateChanged(auth, async (user) => {
    if (!user) return;

    const snap = await getDoc(doc(db, "users", user.uid));
    if (!snap.exists()) return;

    const role = snap.data().role;
    if (role === "admin" || role === "moderator") {
      adminLinks.classList.remove("hidden");
    }
  });
</script>

</body>
</html>
