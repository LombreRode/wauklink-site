<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Admin â€” Historique WAUKLINK</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="/wauklink-site/style.css">

  <style>
    .badge { padding: 4px 8px; border-radius: 10px; font-weight: 600; font-size: 11px; }
    /* Vert : Activations / DÃ©bannissements */
    .b-act { background: #1f8f4a; color: #eafff2; }
    /* Orange : Plans / Modifications */
    .b-dis { background: #c77d00; color: #fff6e6; }
    /* Rouge : Bannissements / Suppressions */
    .b-del { background: #b42318; color: #ffecec; }
    
    .filters .row-actions > * { margin-right: 6px; }
    .table th { text-align: left; padding: 12px; border-bottom: 2px solid #eee; }
    .table td { padding: 12px; border-bottom: 1px solid #eee; vertical-align: middle; }
    .mb { margin-bottom: 20px; }
  </style>
</head>

<body>

<header class="topbar">
  <div class="container topbar-row">
    <div>
      <h1>WAUKLINK</h1>
      <div class="subtitle">Historique des actions admin</div>
    </div>
    <nav class="topbar-nav">
      <a class="btn" href="/wauklink-site/admin/dashboard.html">
        â† Dashboard
      </a>
    </nav>
  </div>
</header>

<main class="container main-layout">

  <div class="row-actions mb">
    <button id="btnCsv" class="btn btn-outline">
      ğŸ“Š Exporter CSV
    </button>
  </div>

  <section class="card filters mb">
    <div class="row-actions">
      <select id="fAction">
        <option value="">Toutes actions</option>
        <option value="user_banned">ğŸš« Bannissement</option>
        <option value="user_unbanned">âœ… DÃ©bannissement</option>
        <option value="user_plan_change">ğŸ’ Changement Plan</option>
        <option value="report_closed">ğŸ“ Signalement traitÃ©</option>
      </select>

      <input id="fAdmin" type="text" placeholder="Email de l'admin...">

      <button id="btnFilter" class="btn btn-ok">Filtrer</button>
      <button id="btnReset" class="btn btn-outline">RÃ©initialiser</button>
    </div>
  </section>

  <p id="msg" class="meta">â³ Chargement de l'historique...</p>

  <section class="card">
    <table class="table" style="width: 100%; border-collapse: collapse;">
      <thead>
        <tr>
          <th>Date</th>
          <th>Admin</th>
          <th>Action</th>
          <th>Cible / DÃ©tails</th>
        </tr>
      </thead>
      <tbody id="rows">
        </tbody>
    </table>
  </section>

</main>

<footer class="footer">
  <div class="container footer-row">
    <span>Â© WAUKLINK â€” SystÃ¨me de ModÃ©ration</span>
  </div>
</footer>

<script type="module">
  import { requireAdmin } from "/wauklink-site/shared/guard.js";

  // Protection de la page
  requireAdmin({
    onOk: () => { console.log("AccÃ¨s Admin autorisÃ©"); },
    onDenied: () => {
      document.body.innerHTML = `
        <main class="container main-layout" style="text-align:center; padding-top:100px;">
          <h2>â›” AccÃ¨s refusÃ©</h2>
          <p class="meta">Cette page est rÃ©servÃ©e aux administrateurs de WAUKLINK.</p>
          <a class="btn" href="/wauklink-site/index.html">Retour Ã  l'accueil</a>
        </main>
      `;
    }
  });
</script>

<script type="module" src="/wauklink-site/admin/logs.js"></script>

</body>
</html>
